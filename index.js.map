{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n    \nconst BASE_URL = 'https://pixabay.com/api/';\n\nconst API_KEY = \"54667544-34f53a0b28c965f6e0120a2cf\";\n\nexport async function getImagesByQuery(query, page = 1) {\n\n const params = {\n      key: API_KEY,\n      q: query,\n      image_type: \"photo\",\n      orientation: \"horizontal\",\n      safesearch: true,\n      page: page,\n      per_page: 15,\n    };\n\n    try {\n      const respoonse = await axios.get(BASE_URL, { params });\n      return respoonse.data\n    }catch(error) {\n        console.error(\"Info about error\", error);\n        throw error;\n    }\n\n}\n\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadBtn = document.querySelector('.btn')\n\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  nav: true,       \n  close: true,     \n  captions: true,\n  captionsData: 'alt', \n  captionDelay: 250  \n})\n\n\nexport async function createGallery(images) { \n     const markup = images\n     .map(({ comments, downloads, likes, views, tags, webformatURL, largeImageURL }) => `\n     <div class=\"gallery__card\">\n        <a href=\"${largeImageURL}\" class=\"gallery__image-link\">\n          <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" class=\"gallery__image\"/>\n        </a>\n        <div class=\"gallery__info\">\n          <p><b>Likes:</b> ${likes}</p>\n          <p><b>Views:</b> ${views}</p>\n          <p><b>Comments:</b> ${comments}</p>\n          <p><b>Downloads:</b> ${downloads}</p>\n        </div>\n      </div>\n     `).join('');\n\n\n     gallery.insertAdjacentHTML('beforeend', markup)\n      lightbox.refresh();\n    };\n\n\nexport function clearGallery() {\n    gallery.innerHTML = '';\n    console.log('Галерею очищенно')\n}\n\n\nexport function showLoader() {\n    loader.classList.add('is-open')\n    console.log('Завантаження')\n}\n\n\nexport function hideLoader() { \n    loader.classList.remove('is-open')\n    console.log('Закінчення завантаження')\n}\n\nexport function showLoadButton() { \n    loadBtn.classList.add('is-open');\n}\n\nexport function hideLoadButton() { \n    loadBtn.classList.remove('is-open');\n}","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n \n\nimport { getImagesByQuery } from \"./js/pixabay-api.js\";\nimport { createGallery, clearGallery, showLoader, hideLoader, hideLoadButton, showLoadButton } from './js/render-functions.js';\nimport { fromJSON } from 'postcss';\n\n\nconst form = document.querySelector('.form');\nconst loadBtn = document.querySelector('.btn');\nlet query = '';\nlet page = 1;\n\nform.addEventListener('submit', async (event) => {\n    event.preventDefault();\n\n    query = event.currentTarget.elements['search-text'].value.trim();\n\n    if(!query) {\n    iziToast.warning({ message: \"Search field cannot be empty!\" });\n    return;\n    }\n    page = 1;\n    clearGallery();\n    hideLoadButton();\n    showLoadButton();\n\n    try {\n      const data = await getImagesByQuery(query, page);\n\n      if(data.hits.length === 0) {\n            iziToast.error({\n            message: \"Sorry, there are no images matching your search query. Please try again!\",\n            position: 'topRight'\n          });\n      }else {\n        createGallery(data.hits);\n\n        const totalPages = Math.ceil(data.totalHits / 15);\n        if(page < totalPages) {\n          showLoadButton();\n        }else {\n          iziToast.info({ message: \"We're sorry, but you've reached the end of search results.\" });\n        }\n      }\n    }\n    catch (error) {\n      console.log(error);\n       iziToast.error({ message: \"Something went wrong. Please try again.\" });\n    }\n    finally {\n      hideLoader();\n      event.target.reset();\n    }\n  \n});\n\n\n\nloadBtn.addEventListener('click', async () => {\n    hideLoadButton();\n    showLoader();\n\n    page += 1;\n\n    try {\n      const data = await getImagesByQuery(query, page);\n      createGallery(data.hits);\n      const galleryCard = document.querySelector('.gallery__card');\n      const cardHeight = galleryCard.getBoundingClientRect().height;\n      window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n      });\n\n      const totalPages = Math.ceil(data.totalHits / 15);\n        if (page >= totalPages) {\n            hideLoadButton();\n            iziToast.info({ message: \"We're sorry, but you've reached the end of search results.\" });\n        } else {\n            showLoadButton();\n        }\n      \n    }\n    catch (error) {\n      iziToast.error({ message: \"Error fetching images!\" });\n      console.log(error);\n    }\n    finally { hideLoader(); }\n})\n\n\n"],"names":["BASE_URL","API_KEY","getImagesByQuery","query","page","params","axios","error","gallery","loader","loadBtn","lightbox","SimpleLightbox","createGallery","images","markup","comments","downloads","likes","views","tags","webformatURL","largeImageURL","clearGallery","showLoader","hideLoader","showLoadButton","hideLoadButton","form","event","iziToast","data","totalPages","cardHeight"],"mappings":"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"}